{
  "version": "1.0",
  "sourceFile": "reportTemplate.docx",
  "description": "Redefined template to drive agent Q&A against Azure AI Search and return structured outputs per section.",
  "variables": {
    "appId": "<Application Name>",
    "environments": [
      "Production",
      "Development",
      "Pre-Production",
      "Testing",
      "Disaster Recovery"
    ]
  },
  "searchDefaults": {
    "indexNameEnv": "AZURE_AI_SEARCH_INDEX_NAME",
    "filterTemplate": "appId eq '{appId}'",
    "fields": ["content", "title", "category", "section", "environment", "tags"],
    "topK": 5,
    "semantic": true
  },
  "sections": [
    {
      "id": "application_name",
      "title": "Application Name",
      "blockType": "paragraph",
      "prompt": "State the formal application name for {appId}. If multiple aliases exist, list primary name and known aliases.",
      "output": {"format": "markdown"}
    },
    {
      "id": "external_dependencies",
      "title": "External services, databases, and integrations",
      "blockType": "paragraph",
      "prompt": "List external services, databases, and system integrations used by {appId} per environment. Include endpoints, protocols, auth methods, and data flows if available.",
      "output": {"format": "bulleted"}
    },
    {
      "id": "security_considerations",
      "title": "Security Considerations",
      "blockType": "paragraph",
      "prompt": "Summarize security considerations for {appId}: secrets management approach, certificate usage and storage, password handling/local storage, cryptographic algorithms and key lengths, and any known constraints or policies.",
      "output": {"format": "markdown"}
    },
    {
      "id": "resiliency_configuration",
      "title": "Resiliency Configuration",
      "blockType": "paragraph",
      "prompt": "Describe resiliency for {appId}: primary and DR regions/sites, BCDR strategy, RPO, RTO, and SLA/SLO targets per environment.",
      "output": {"format": "bulleted"}
    },
    {
      "id": "network_access_requirements",
      "title": "Network Access Requirements",
      "blockType": "paragraph",
      "prompt": "Detail network requirements for {appId}: VCI/SDWAN/market connectivity, latency and bandwidth needs, protocols/ports, middleware, encryption, load balancing, and any Iron Cloud specifics.",
      "output": {"format": "markdown"}
    },
    {
      "id": "identity_providers",
      "title": "Identity Providers",
      "blockType": "paragraph",
      "prompt": "Explain identity and access for {appId}: authentication/authorization patterns for app, database, and servers, including AAA/SSO and providers (AD/AAD/LDAP/SAML/OAuth/OpenID Connect/other).",
      "output": {"format": "markdown"}
    },
    {
      "id": "automation",
      "title": "Automation",
      "blockType": "paragraph",
      "prompt": "Describe build/deploy automation for {appId}: CI/CD tooling, pipelines, environments, artifact repos, infra-as-code, and promotion strategy.",
      "output": {"format": "markdown"}
    },
    {
      "id": "customer_impact",
      "title": "Customer Impact",
      "blockType": "paragraph",
      "prompt": "Describe internal/external customer impact for migrating {appId} and mitigations (downtime windows, communications, fallbacks, data freeze).",
      "output": {"format": "markdown"}
    },
    {
      "id": "operational_concerns",
      "title": "Operational Concerns",
      "blockType": "paragraph",
      "prompt": "Summarize operational concerns for {appId}: scalability constraints, security risks, performance bottlenecks, and supportability issues.",
      "output": {"format": "markdown"}
    },
    {
      "id": "migration_acceptance_tests",
      "title": "Migration Acceptance Tests",
      "blockType": "paragraph",
      "prompt": "Indicate whether migration acceptance tests exist/are needed for {appId}, and list test categories (functional, integration, performance, security, DR).",
      "output": {"format": "bulleted"}
    },
    {
      "id": "observability_monitoring",
      "title": "Observability - Monitoring",
      "blockType": "paragraph",
      "prompt": "List monitoring solutions for {appId} across app/infra/security, with key metrics/dashboards per environment.",
      "output": {"format": "bulleted"}
    },
    {
      "id": "observability_alerts",
      "title": "Observability - Alerts",
      "blockType": "paragraph",
      "prompt": "List alert rules for {appId}: metrics and thresholds, severity, and notification destinations.",
      "output": {"format": "bulleted"}
    },
    {
      "id": "observability_events",
      "title": "Observability - Events",
      "blockType": "paragraph",
      "prompt": "List important event types for {appId} and destinations/consumers (event hubs, queues, webhooks).",
      "output": {"format": "bulleted"}
    },
    {
      "id": "supporting_documents",
      "title": "Supporting Documents",
      "blockType": "table",
      "prompt": "Provide links to supporting documentation relevant to {appId}.",
      "table": {
        "columns": ["Artefact", "Information Location"]
      }
    },
    {
      "id": "current_logical_architecture",
      "title": "Current Logical Architecture",
      "blockType": "group",
      "repeatPerEnvironment": true,
      "prompt": "Describe the current logical architecture for {appId} in {environment}: major components, data stores, integrations, and key flows.",
      "output": {"format": "markdown"}
    },
    {
      "id": "application_network_flow",
      "title": "Application Network Flow",
      "blockType": "group",
      "repeatPerEnvironment": true,
      "prompt": "Describe the application network flow for {appId} in {environment}: ingress/egress, ports/protocols, dependencies, and security controls.",
      "output": {"format": "markdown"}
    },
    {
      "id": "proposed_architecture_in_azure",
      "title": "Proposed Architecture in Azure",
      "blockType": "group",
      "repeatPerEnvironment": true,
      "prompt": "Propose the target Azure architecture for {appId} in {environment}: services, sizing, HA/DR, networking, and managed offerings where applicable.",
      "output": {"format": "markdown"}
    },
    {
      "id": "proposed_components_table",
      "title": "Proposed Architecture Details Table",
      "blockType": "table",
      "repeatPerEnvironment": true,
      "prompt": "Tabulate proposed components for {appId} in {environment} with brief details.",
      "table": {
        "columns": ["Component", "Details"]
      }
    },
    {
      "id": "architecture_heatmap",
      "title": "Architecture Heatmap",
      "blockType": "table",
      "prompt": "Provide a heatmap for {appId} across areas with notes and ranking.",
      "table": {
        "columns": ["Area", "Notes", "Ranking"]
      }
    },
    {
      "id": "allocation_and_scheduling",
      "title": "Application Allocation and Scheduling",
      "blockType": "table",
      "prompt": "Summarize allocation and scheduling for {appId}.",
      "table": {
        "columns": ["Move Group:", "Wave Allocation:", "Scheduling", "Migration Factory"]
      }
    },
    {
      "id": "allocation_and_scheduling_decisions",
      "title": "Allocation and Scheduling Decisions",
      "blockType": "table",
      "prompt": "Capture key decisions and notes for {appId}.",
      "table": {
        "columns": [
          "Area",
          "Final Decision"
        ]
      }
    },
    {
      "id": "additional_backlog_items",
      "title": "Additional Backlog Items",
      "blockType": "table",
      "prompt": "List additional work items required to complete {appId} migration with brief notes.",
      "table": {
        "columns": ["Area", "Final Decision"]
      }
    },
    {
      "id": "rbac_application_infrastructure",
      "title": "Application and Infrastructure RBAC",
      "blockType": "table",
      "repeatPerEnvironment": true,
      "prompt": "Provide RBAC groups for {appId} application and infrastructure in {environment}.",
      "table": {
        "columns": ["Areas", "Role", "Access List"]
      }
    },
    {
      "id": "rbac_users",
      "title": "Users and Access",
      "blockType": "table",
      "repeatPerEnvironment": true,
      "prompt": "Provide users/groups requiring access for {appId} in {environment}.",
      "table": {
        "columns": ["Name", "User ID", "User Email address", "Access Type", "Roles"]
      }
    },
    {
      "id": "azure_services_rbac",
      "title": "Azure Services RBAC",
      "blockType": "table",
      "repeatPerEnvironment": true,
      "prompt": "Provide Azure RBAC assignments for services used by {appId} in {environment}.",
      "table": {
        "columns": ["Areas", "Role", "Access List"]
      }
    },
    {
      "id": "azure_tagging",
      "title": "Azure Tagging",
      "blockType": "table",
      "prompt": "List required Azure tags for resources running {appId}.",
      "table": {
        "columns": ["Tag Name", "Type", "Description", "Value"]
      }
    },
    {
      "id": "source_requirements",
      "title": "Source Migration Delivery Information",
      "blockType": "table",
      "prompt": "Provide source-side requirements for migrating {appId}.",
      "table": {
        "columns": [
          "Requirements",
          "Comments"
        ]
      }
    },
    {
      "id": "target_requirements",
      "title": "Target Migration Delivery Information",
      "blockType": "table",
      "prompt": "Provide Azure-side (target) operational requirements post-migration for {appId}.",
      "table": {
        "columns": ["Requirements", "Comments"]
      }
    },
    {
      "id": "post_migration_operations",
      "title": "Post-Migration Operations",
      "blockType": "table",
      "prompt": "Summarize post-migration operations requirements for {appId} in Azure.",
      "table": {
        "columns": [
          "Requirements",
          "Comments"
        ]
      }
    }
  ],
  "agentOutputContract": {
    "description": "For every prompt, the Answer Agent must return strict JSON with these keys; Confidence must be derived from search score and Citation must include the document/reference identifiers.",
    "schema": {
      "Response": "string (markdown or JSON table rows as applicable)",
      "Guidance": "string (optional advisory or assumptions)",
      "Confidence": "number (0.0-1.0, derived from top search score)",
      "Citation": "string or array of strings (source references such as document name/url/id)"
    },
    "emptyResultRule": "If no supporting sources are found, Response and Citation must be empty, and Confidence=0.0."
  }
}
